<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>playing with docker | Bryan Lawrence</title>
  <meta name="description" content="From time to time I get a very short opportunity to try and do some science, and I find the context switching harder and harder. To that end, I want to make more use of ipython-notebook.">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://www.bnlawrence.net//computing/2015/05/playing_with_docker/">
  <link rel="alternate" type="application/rss+xml" title="Bryan Lawrence" href="https://www.bnlawrence.net//feed.xml" />
<link rel='stylesheet' id='open-sans-css'  href='//fonts.googleapis.com/css?family=Open+Sans%3A300italic%2C400italic%2C600italic%2C300%2C400%2C600&#038;subset=latin%2Clatin-ext&#038;ver=4.2.4' type='text/css' media='all' />
<link href='http://fonts.googleapis.com/css?family=Titillium+Web:600italic,600,400,400italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="https://www.osu.edu/assets/fonts/webfonts.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">






<!-- Twitter cards -->
<meta name="twitter:site"    content="@bnlawrence">
<meta name="twitter:title"   content="playing with docker">


<meta name="twitter:description" content="From time to time I get a very short opportunity to try and do some science, and I find the context switching harder and harder. To that end, I want to make more use of ipython-notebook.

">



<meta name="twitter:card"  content="summary">
<meta name="twitter:image" content="">

<!-- end of Twitter cards -->

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Bryan Lawrence</a>


    <nav class="site-nav">

      <a href="#" class="menu-icon menu.open">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

    <div class="trigger"><h1>Main Navigation</h1>

 <ul class="menu">

    
    
     <li><a href="/" class="page-link">Home</a>
    
    </li>
    
    
     <li><a href="/about/" class="page-link">About</a>
    
    </li>
    
    
    <li><a href="/academic/" class="page-link">Academic</a>
    <ul class="sub-menu">
    
    <li><a href="/academic/">Academic</a></li>
    
    <li><a href="/projects/">Projects</a></li>
    
    <li><a href="/publications/">Publications</a></li>
    
    <li><a href="/cv/">Short CV</a></li>
    
    <li><a href="/research/">Research</a></li>
    
    <li><a href="/talks/">Talks</a></li>
    
    </ul>
    
    </li>
    
    
     <li><a href="/blog/" class="page-link">Blog</a>
    
    </li>
    
    
     <li><a href="/search/" class="page-link">Find</a>
    
    </li>
    
    </ul>


     </div>
    </nav>
</div>
<div class="wrapper">
   <p> Intermittent rambings on climate, computing, or data science, what I'm up to, and what I'm thinking. Mostly professional, sometimes not.
 </p>
</div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

 <header class="post-header">
  <h1 class="post-title">playing with docker</h1>
  <p class="post-meta">Posted on May 10, 2015
  
  
      in
      
      <a href="/categories/#computing" title="computing">computing</a>&nbsp;
      
  
  
  
  (tagged: <a href="/tags/docker/" rel="tag">docker</a>).
  
  <br/>
  
  
  Previous Post: <a class="prev" href="/talks/2015/04/Lawrence_Tyranny/">&laquo;EGU&raquo;</a>
  
  
  (in <a href="/categories/#talks" title="talks">talks</a>;
  in <a href="/categories/#computing" title="computing">computing</a> previous is <a href="/computing/2015/03/a_citation_and_provenance_system_for_climate_modelling/" class="prev">&laquo;A citation and provenance system for climate modelling&raquo;</a>)
  
  .<br/>
   Next Post <a class="next" href="/talks/2015/06/Lawrence_Cloud/">&laquo;RCUK Cloud Workshop&raquo;</a>
  
  
  (in <a href="/categories/#talks" title="talks">talks</a>;
  in <a href="/categories/#computing" title="computing">computing</a> next is <a href="/computing/2017/02/so_much_data_one/" class="next">&laquo;Why so much data?  Part I -   The rise of direct numerical simulation&raquo;</a>)
  
  .
  </p>
</header>


  <article class="post-content">
    <p>From time to time I get a very short opportunity to try and do some science, and I find the context switching harder and harder. To that end, I want to make more use of ipython-notebook.</p>

<p>Nowadays my compute environment is a macbook pro running mavericks, and I have two VMS built: a JASMIN analysis platform (JAP) image (based on Centos, for science) and a Linux Mint image (primarily to give me a route to reliable LibreOffice - unlike the version running on the Mac). Both can run ipython notebook, but I couldn’t work out how to get that visible to browsers running in my Mac environment (which is what I wanted this time).</p>

<p>I could probably have worked that out, but  I thought, it’s about time I got some hands on experience with docker, since everyone is raving about it, and folks in my team are also starting to use it … so why not try that route?</p>

<p>Herewith a couple of hours on a Saturday afternoon and another hour or so on a Sunday morning:</p>

<p>I got boot2docker working, and then  I thought I’d try out the continuumio anaconda image … but I immediately discovered that it didn’t have netcdf4 and basemap by default (and that matplotlib  was broken), so herewith my first dockerfile:</p>
<pre>
# aims to run basemap, and eventually, cf-python
# the anaconder base image is itself based on debian
FROM continuumio/anaconda
MAINTAINER Bryan Lawrence &lt;bryan.lawrence@ncas.ac.uk&gt;

# as of May 10, 2015 the base image needs this to work with matplotlib:
RUN apt-get -y install libglib2.0-0

# now the stuff we want
RUN conda install netcdf4
RUN conda install basemap
</pre>
<p>I was able to build that using</p>
<pre>
docker build -t bnlawrence/cfconda .
</pre>
<p>and run it using:</p>
<pre>
docker run -it  -v $(pwd):/usr/data -w /usr/data -p 8888:8888 bnlawrence/cfconda
</pre>
<p>(from within a directory on the mac where I wanted my notebooks to reside.)
I then have to run</p>
<pre>
ipython notebook --ip=0.0.0.0 --no-browser
</pre>
<p>inside the container, whereupon, as if by magic, I can access my notebooks on the mac at</p>
<pre>
http://192.168.59.103:8888/tree
</pre>
<p>(I would have liked to have run the notebook directly on the end of the docker run statement, but when i do that, the notebook kernel seems to be really unstable and repeatedly crash. I don’t know why.)</p>

<p>Now, hopefully I can start using ipython notebook during my working week …</p>

  </article>

  


</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">
    <hr/>
<!--     <h2 class="footer-heading">Bryan Lawrence</h2> -->

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li><strong>Bryan Lawrence</strong></li>
		  <li>Professional Meeting Attendee</li>
          <li><a href="mailto:b.n.lawrence@reading.ac.uk">b.n.lawrence@reading.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">

          
          <li>
              <a href="https://github.com/bnlawrence">
              <i class="fa fa-github" style="color:gray"></i> bnlawrence
             </a>
          </li>
          

          
          <li>
             <a href="https://twitter.com/bnlawrence">
             <i class="fa fa-twitter" style="color:gray"></i> bnlawrence
             </a>
          </li>
          
          

        </ul>
      </div>

      <div class="footer-col  footer-col-3">
         <p class="text">
	     This is a personal site. Caveat Lector. Nothing written here reflects an official opinion of my employer or any funding agency.  Laboris locatores analogum obsecro respice auferetur. (The benefit of my daughter's education, not mine.)

      </div>
    </div>
    <!--
    <hr/>
    <p class="text"> This is a personal site. Caveat Lector. Nothing written here reflects an official opinion of my employer or any funding agency.  Laboris locatores analogum obsecro respice auferetur. (The benefit of my daughter's education, not mine.)
 </p>
    -->

  </div>

</footer>

    
  </body>


</html>
